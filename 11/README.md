# IPC (междупроцесна комуникация)

Употреба на системните извиквания `kill(2)` , `signal(2)` и `mmap(2)` .

## Сигнали

Сигнали се изпращат чрез `kill(2)` на процес с определен идентификатор от текущия процес.При получаването на сигнала процесът винаги реагира по определен конкретен начин, който може да се промени чрез `signal(2)` .Операционната система изпраща автоматично определени сигнали при настъпването на определени условия.Пример за това е `SIGINT` , който се изпраща на активния процес в терминала при натискането на `Ctrl+C` .

За терминирането на процес обикновено се използва сигналът `SIGTERM` .

За повече информация относно сигналите може да проверите *man* страницата за `signal(7)` .

### `kill(2)` 

        #include <signal.h>
        int kill(pid_t pid, int sig);

Системното извикване `kill()` се използва за изпращането на сигнала `sig` на определен процес с идентификатор `pid` .

Ако `pid` е `0` , то сигналът се изпраща на всички процеси от групата на текущия процес.Ако `pid` е `-1` , сигналът се изпраща на всички процеси, на които текущият процес има право да изпраща сигнали, освен процеса с идентификатор `1` ( `init` ).Ако `pid` е по-малък от `-1` , то сигналът се изпраща на всички процеси от групата с идентификатор `-pid` .

Ако `sig` е `0` , сигнал не се изпраща, но все пак се проверява дали процес с идентификатор `pid` съществува и дали текущият процес има разрешения да му изпраща сигнали.

`kill()` връща стойност `0` при успешно изпълнение на операцията или `-1` в противен случай.

### `signal(2)` 

        #include <signal.h>
        typedef void (*sighandler_t)(int);
        sighandler_t signal(int signum, sighandler_t handler);

Системното извикване `signal()` задава функцията `handler` като обслужваща функция за сигнала `signum` (т.е.променя поведението на текущия процес при получаване на сигнала `signum` ).В зависимост от стойността на `handler` при получаването на сигнал `signum` се случват различни неща:

* Ако `handler` е `SIG_IGN` , то сигалът се игнорира.
* Ако `handler` е `SIG_DFL` , то се изпълнява действието, асоциирано със сигнала по подразбиране.
* В противен случай функцията `handler` се извиква с аргумент `signum` .

Поведението при получаване на сигнал `SIGKILL` или `SIGSTOP` не може да се променя чрез `signal()` .

`signal()` връща предната обслужваща функция за `signum` или `SIG_ERR` при грешка.

## Споделена памет

### `mmap(2)` 

Създаване на блок от споделена памет с размер `size` чрез системното извикване `mmap()` се извършва по следния начин :

`void* shared_memory = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);` 

## Задачи

Да се напише програма, която:

1. Терминира всички процеси, чиито идентификатори са подадени на командния ред.

2. Изпълнява безкраен цикъл, която не може да се прекъсне с **Ctrl+C**.

3.Да се напише програма, състояща се от два процеса: единият записва в споделената памет `Hello world` , а другият извежда съобщението.

